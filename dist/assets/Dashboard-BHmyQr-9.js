import{m as f,o as g,r as t,j as a}from"./index-D7F0MAQ-.js";import{g as p}from"./newsService-DiONljKG.js";function y(){const{userData:s}=f()??{},d=g(),[m,h]=t.useState([]),[o,l]=t.useState(!1),[i,r]=t.useState(null),c=async()=>{l(!0),r(null);try{const e=await p(null);h(Array.isArray(e)?e:[])}catch(e){console.error("Error cargando resumen:",e),r("No se pudo cargar el resumen de noticias.")}finally{l(!1)}};t.useEffect(()=>{c()},[]);const u=e=>(e==null?void 0:e.estado)??(e==null?void 0:e.status)??"Edición",n=m.reduce((e,j)=>{const x=u(j);return e.total+=1,e[x]=(e[x]||0)+1,e},{total:0}),b=()=>{if(!(s!=null&&s.role)){r("No se pudo determinar tu rol. Por favor, cierra sesión y vuelve a intentar.");return}s.role==="editor"?d("/dashboard/editor"):s.role==="reportero"?d("/dashboard/reportero"):r("No tienes un rol válido para acceder a los paneles específicos.")};return a.jsxs("div",{className:"max-w-6xl mx-auto p-6 jdx-dashboard text-[#0f1b2e]",children:[a.jsxs("header",{className:"flex flex-col sm:flex-row justify-between items-center gap-4 mb-6 jdx-dashboard-header",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-xl font-bold mb-1 jdx-dashboard-title",children:"Panel Principal"}),a.jsxs("p",{className:"text-gray-500 text-sm jdx-dashboard-sub",children:["Resumen de noticias y accesos rápidos —"," ",(s==null?void 0:s.role)??"Invitado"]})]}),a.jsxs("div",{className:"flex gap-2 jdx-dashboard-actions",children:[a.jsx("button",{className:"jdx-btn jdx-btn-secondary",onClick:c,disabled:o,children:o?"Cargando…":"Refrescar"}),a.jsx("button",{className:"jdx-btn jdx-btn-primary",onClick:b,children:"Ir al Panel"})]})]}),i&&a.jsx("div",{className:"p-3 mb-4 rounded-md bg-red-50 text-red-600 border border-red-100 jdx-dashboard-error",children:i}),a.jsx("section",{className:"grid grid-cols-1 sm:grid-cols-3 lg:grid-cols-5 gap-4 jdx-dashboard-grid",children:["Total","Edición","Terminado","Publicado","Desactivado"].map(e=>a.jsxs("article",{className:"bg-white rounded-xl shadow-md p-4 flex flex-col gap-1 jdx-card",children:[a.jsx("div",{className:"text-gray-500 font-semibold text-sm jdx-card-title",children:e}),a.jsx("div",{className:"text-2xl font-extrabold jdx-card-value",children:e==="Total"?n.total:n[e]||0})]},e))}),a.jsxs("footer",{className:"mt-6 text-right text-gray-500 text-sm jdx-dashboard-footer",children:["Última actualización:"," ",o?"actualizando…":new Date().toLocaleString()]})]})}export{y as default};
