import{w as t}from"./index-D7F0MAQ-.js";async function c(s,o,e,n="reportero"){try{const{data:r,error:i}=await t.auth.signUp({email:s,password:o,options:{data:{name:e}}});if(console.debug("registerUser response:",{authData:r,signUpError:i}),i)throw i;if(!(r!=null&&r.user))throw new Error("No se pudo crear la cuenta");return r.user}catch(r){throw console.error("Error en registerUser:",r),r}}async function u(s,o){try{const{data:e,error:n}=await t.auth.signInWithPassword({email:s,password:o});if(console.debug("loginUser response:",{data:e,error:n}),n){const r=((n==null?void 0:n.message)||"").toLowerCase();throw r.includes("invalid login")||r.includes("invalid credentials")||r.includes("invalid password")?new Error("Correo o contraseña incorrectos."):r.includes("user not found")||r.includes("no user")?new Error("No existe una cuenta con ese correo."):r.includes("invalid email")?new Error("Correo inválido."):r.includes("too many requests")||r.includes("too many")?new Error("Demasiados intentos fallidos. Intenta más tarde."):n}return e}catch(e){throw console.error("loginUser error:",e),e instanceof Error?e:new Error(String(e))}}async function d(){const{data:s,error:o}=await t.auth.signInWithOAuth({provider:"google"});if(o)throw o;return s}async function l(s){const{data:o,error:e}=await t.from("users").select("*").eq("id",s).single();if(e)throw e;return o}async function w(s,o){const{error:e}=await t.from("users").upsert({id:s,...o,updated_at:new Date().toISOString()});if(e)throw e}export{w as a,l as g,u as l,c as r,d as s};
