var pe=t=>{throw TypeError(t)};var Z=(t,e,s)=>e.has(t)||pe("Cannot "+s);var i=(t,e,s)=>(Z(t,e,"read from private field"),s?s.call(t):e.get(t)),g=(t,e,s)=>e.has(t)?pe("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,s),u=(t,e,s,r)=>(Z(t,e,"write to private field"),r?r.call(t,s):e.set(t,s),s),p=(t,e,s)=>(Z(t,e,"access private method"),s);import{S as Ce,p as me,a as R,s as q,b as k,n as ee,i as te,c as ge,t as Ie,d as G,f as Ne,e as Oe,g as be,h as Se,r as I,k as Te,u as _e,l as Me,j as d,L as Qe}from"./index-D7F0MAQ-.js";import{a as Ue}from"./newsService-DiONljKG.js";var v,a,V,b,T,U,C,N,z,P,D,_,M,O,F,o,H,se,ie,re,ae,ne,oe,he,je,Re,Pe=(Re=class extends Ce{constructor(e,s){super();g(this,o);g(this,v);g(this,a);g(this,V);g(this,b);g(this,T);g(this,U);g(this,C);g(this,N);g(this,z);g(this,P);g(this,D);g(this,_);g(this,M);g(this,O);g(this,F,new Set);this.options=s,u(this,v,e),u(this,N,null),u(this,C,me()),this.bindMethods(),this.setOptions(s)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(i(this,a).addObserver(this),xe(i(this,a),this.options)?p(this,o,H).call(this):this.updateResult(),p(this,o,ae).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return ce(i(this,a),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return ce(i(this,a),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,p(this,o,ne).call(this),p(this,o,oe).call(this),i(this,a).removeObserver(this)}setOptions(e){const s=this.options,r=i(this,a);if(this.options=i(this,v).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof R(this.options.enabled,i(this,a))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");p(this,o,he).call(this),i(this,a).setOptions(this.options),s._defaulted&&!q(this.options,s)&&i(this,v).getQueryCache().notify({type:"observerOptionsUpdated",query:i(this,a),observer:this});const n=this.hasListeners();n&&ve(i(this,a),r,this.options,s)&&p(this,o,H).call(this),this.updateResult(),n&&(i(this,a)!==r||R(this.options.enabled,i(this,a))!==R(s.enabled,i(this,a))||k(this.options.staleTime,i(this,a))!==k(s.staleTime,i(this,a)))&&p(this,o,se).call(this);const h=p(this,o,ie).call(this);n&&(i(this,a)!==r||R(this.options.enabled,i(this,a))!==R(s.enabled,i(this,a))||h!==i(this,O))&&p(this,o,re).call(this,h)}getOptimisticResult(e){const s=i(this,v).getQueryCache().build(i(this,v),e),r=this.createResult(s,e);return Fe(this,r)&&(u(this,b,r),u(this,U,this.options),u(this,T,i(this,a).state)),r}getCurrentResult(){return i(this,b)}trackResult(e,s){return new Proxy(e,{get:(r,n)=>(this.trackProp(n),s==null||s(n),n==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&i(this,C).status==="pending"&&i(this,C).reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(r,n))})}trackProp(e){i(this,F).add(e)}getCurrentQuery(){return i(this,a)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const s=i(this,v).defaultQueryOptions(e),r=i(this,v).getQueryCache().build(i(this,v),s);return r.fetch().then(()=>this.createResult(r,s))}fetch(e){return p(this,o,H).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),i(this,b)))}createResult(e,s){var fe;const r=i(this,a),n=this.options,h=i(this,b),c=i(this,T),S=i(this,U),x=e!==r?e.state:i(this,V),{state:E}=e;let l={...E},L=!1,m;if(s._optimisticResults){const w=this.hasListeners(),K=!w&&xe(e,s),Q=w&&ve(e,r,s,n);(K||Q)&&(l={...l,...Oe(E.data,e.options)}),s._optimisticResults==="isRestoring"&&(l.fetchStatus="idle")}let{error:A,errorUpdatedAt:B,status:y}=l;m=l.data;let W=!1;if(s.placeholderData!==void 0&&m===void 0&&y==="pending"){let w;h!=null&&h.isPlaceholderData&&s.placeholderData===(S==null?void 0:S.placeholderData)?(w=h.data,W=!0):w=typeof s.placeholderData=="function"?s.placeholderData((fe=i(this,D))==null?void 0:fe.state.data,i(this,D)):s.placeholderData,w!==void 0&&(y="success",m=be(h==null?void 0:h.data,w,s),L=!0)}if(s.select&&m!==void 0&&!W)if(h&&m===(c==null?void 0:c.data)&&s.select===i(this,z))m=i(this,P);else try{u(this,z,s.select),m=s.select(m),m=be(h==null?void 0:h.data,m,s),u(this,P,m),u(this,N,null)}catch(w){u(this,N,w)}i(this,N)&&(A=i(this,N),m=i(this,P),B=Date.now(),y="error");const J=l.fetchStatus==="fetching",X=y==="pending",Y=y==="error",ue=X&&J,de=m!==void 0,j={status:y,fetchStatus:l.fetchStatus,isPending:X,isSuccess:y==="success",isError:Y,isInitialLoading:ue,isLoading:ue,data:m,dataUpdatedAt:l.dataUpdatedAt,error:A,errorUpdatedAt:B,failureCount:l.fetchFailureCount,failureReason:l.fetchFailureReason,errorUpdateCount:l.errorUpdateCount,isFetched:l.dataUpdateCount>0||l.errorUpdateCount>0,isFetchedAfterMount:l.dataUpdateCount>x.dataUpdateCount||l.errorUpdateCount>x.errorUpdateCount,isFetching:J,isRefetching:J&&!X,isLoadingError:Y&&!de,isPaused:l.fetchStatus==="paused",isPlaceholderData:L,isRefetchError:Y&&de,isStale:le(e,s),refetch:this.refetch,promise:i(this,C),isEnabled:R(s.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){const w=$=>{j.status==="error"?$.reject(j.error):j.data!==void 0&&$.resolve(j.data)},K=()=>{const $=u(this,C,j.promise=me());w($)},Q=i(this,C);switch(Q.status){case"pending":e.queryHash===r.queryHash&&w(Q);break;case"fulfilled":(j.status==="error"||j.data!==Q.value)&&K();break;case"rejected":(j.status!=="error"||j.error!==Q.reason)&&K();break}}return j}updateResult(){const e=i(this,b),s=this.createResult(i(this,a),this.options);if(u(this,T,i(this,a).state),u(this,U,this.options),i(this,T).data!==void 0&&u(this,D,i(this,a)),q(s,e))return;u(this,b,s);const r=()=>{if(!e)return!0;const{notifyOnChangeProps:n}=this.options,h=typeof n=="function"?n():n;if(h==="all"||!h&&!i(this,F).size)return!0;const c=new Set(h??i(this,F));return this.options.throwOnError&&c.add("error"),Object.keys(i(this,b)).some(S=>{const f=S;return i(this,b)[f]!==e[f]&&c.has(f)})};p(this,o,je).call(this,{listeners:r()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&p(this,o,ae).call(this)}},v=new WeakMap,a=new WeakMap,V=new WeakMap,b=new WeakMap,T=new WeakMap,U=new WeakMap,C=new WeakMap,N=new WeakMap,z=new WeakMap,P=new WeakMap,D=new WeakMap,_=new WeakMap,M=new WeakMap,O=new WeakMap,F=new WeakMap,o=new WeakSet,H=function(e){p(this,o,he).call(this);let s=i(this,a).fetch(this.options,e);return e!=null&&e.throwOnError||(s=s.catch(ee)),s},se=function(){p(this,o,ne).call(this);const e=k(this.options.staleTime,i(this,a));if(te||i(this,b).isStale||!ge(e))return;const r=Ie(i(this,b).dataUpdatedAt,e)+1;u(this,_,G.setTimeout(()=>{i(this,b).isStale||this.updateResult()},r))},ie=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(i(this,a)):this.options.refetchInterval)??!1},re=function(e){p(this,o,oe).call(this),u(this,O,e),!(te||R(this.options.enabled,i(this,a))===!1||!ge(i(this,O))||i(this,O)===0)&&u(this,M,G.setInterval(()=>{(this.options.refetchIntervalInBackground||Ne.isFocused())&&p(this,o,H).call(this)},i(this,O)))},ae=function(){p(this,o,se).call(this),p(this,o,re).call(this,p(this,o,ie).call(this))},ne=function(){i(this,_)&&(G.clearTimeout(i(this,_)),u(this,_,void 0))},oe=function(){i(this,M)&&(G.clearInterval(i(this,M)),u(this,M,void 0))},he=function(){const e=i(this,v).getQueryCache().build(i(this,v),this.options);if(e===i(this,a))return;const s=i(this,a);u(this,a,e),u(this,V,e.state),this.hasListeners()&&(s==null||s.removeObserver(this),e.addObserver(this))},je=function(e){Se.batch(()=>{e.listeners&&this.listeners.forEach(s=>{s(i(this,b))}),i(this,v).getQueryCache().notify({query:i(this,a),type:"observerResultsUpdated"})})},Re);function De(t,e){return R(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function xe(t,e){return De(t,e)||t.state.data!==void 0&&ce(t,e,e.refetchOnMount)}function ce(t,e,s){if(R(e.enabled,t)!==!1&&k(e.staleTime,t)!=="static"){const r=typeof s=="function"?s(t):s;return r==="always"||r!==!1&&le(t,e)}return!1}function ve(t,e,s,r){return(t!==e||R(r.enabled,t)===!1)&&(!s.suspense||t.state.status!=="error")&&le(t,s)}function le(t,e){return R(e.enabled,t)!==!1&&t.isStaleByTime(k(e.staleTime,t))}function Fe(t,e){return!q(t.getCurrentResult(),e)}var Ee=I.createContext(!1),Le=()=>I.useContext(Ee);Ee.Provider;function Ae(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var Be=I.createContext(Ae()),He=()=>I.useContext(Be),ke=(t,e)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(e.isReset()||(t.retryOnMount=!1))},Ve=t=>{I.useEffect(()=>{t.clearReset()},[t])},ze=({result:t,errorResetBoundary:e,throwOnError:s,query:r,suspense:n})=>t.isError&&!e.isReset()&&!t.isFetching&&r&&(n&&t.data===void 0||Te(s,[t.error,r])),We=t=>{if(t.suspense){const s=n=>n==="static"?n:Math.max(n??1e3,1e3),r=t.staleTime;t.staleTime=typeof r=="function"?(...n)=>s(r(...n)):s(r),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3))}},Ke=(t,e)=>t.isLoading&&t.isFetching&&!e,$e=(t,e)=>(t==null?void 0:t.suspense)&&e.isPending,ye=(t,e,s)=>e.fetchOptimistic(t).catch(()=>{s.clearReset()});function Ge(t,e,s){var l,L,m,A,B;const r=Le(),n=He(),h=_e(s),c=h.defaultQueryOptions(t);(L=(l=h.getDefaultOptions().queries)==null?void 0:l._experimental_beforeQuery)==null||L.call(l,c),c._optimisticResults=r?"isRestoring":"optimistic",We(c),ke(c,n),Ve(n);const S=!h.getQueryCache().get(c.queryHash),[f]=I.useState(()=>new e(h,c)),x=f.getOptimisticResult(c),E=!r&&t.subscribed!==!1;if(I.useSyncExternalStore(I.useCallback(y=>{const W=E?f.subscribe(Se.batchCalls(y)):ee;return f.updateResult(),W},[f,E]),()=>f.getCurrentResult(),()=>f.getCurrentResult()),I.useEffect(()=>{f.setOptions(c)},[c,f]),$e(c,x))throw ye(c,f,n);if(ze({result:x,errorResetBoundary:n,throwOnError:c.throwOnError,query:h.getQueryCache().get(c.queryHash),suspense:c.suspense}))throw x.error;if((A=(m=h.getDefaultOptions().queries)==null?void 0:m._experimental_afterQuery)==null||A.call(m,c,x),c.experimental_prefetchInRender&&!te&&Ke(x,r)){const y=S?ye(c,f,n):(B=h.getQueryCache().get(c.queryHash))==null?void 0:B.promise;y==null||y.catch(ee).finally(()=>{f.updateResult()})}return c.notifyOnChangeProps?x:f.trackResult(x)}function Je(t,e){return Ge(t,Pe,e)}function we(t,e=!1){if(!t)return"";const s=typeof t=="string"||typeof t=="number"?new Date(t):t;if(!(s instanceof Date)||isNaN(s))return String(t);const r=e?{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}:{year:"numeric",month:"short",day:"numeric"};try{return new Intl.DateTimeFormat("es-ES",r).format(s)}catch{return s.toLocaleString()}}function et(){const{id:t}=Me(),{data:e,isLoading:s,isError:r,error:n}=Je(["news",t],()=>Ue(t));if(s)return d.jsxs("div",{className:"jdx-newsview-loading",children:[d.jsx("div",{className:"spinner","aria-hidden":"true"}),d.jsx("p",{className:"text-muted",children:"Cargando noticia..."})]});if(r||!e)return d.jsxs("div",{className:"jdx-newsview-error p-6 max-w-3xl mx-auto",children:[d.jsx("h2",{className:"text-xl font-semibold",children:"Noticia no encontrada"}),d.jsx("p",{className:"text-sm text-muted",children:(n==null?void 0:n.message)??"No se pudo cargar la noticia."}),d.jsx(Qe,{to:"/",className:"jdx-link mt-4",children:"Volver al inicio"})]});const h=e.title??e.titulo,c=e.content??e.contenido??e.body,S=e.author??e.autor??"Anónimo",f=e.imageUrl??e.imageURL??e.image,x=e.category??e.categoria??"",E=e.status??e.estado??"",l=e.createdAt??e.created_at??e.createdAt;return d.jsxs("article",{className:"jdx-newsview max-w-3xl mx-auto p-6 bg-white rounded-2xl shadow-md",children:[d.jsxs("header",{className:"jdx-newsview-header mb-4",children:[x&&d.jsx("span",{className:"jdx-newsview-category",children:x}),d.jsx("h1",{className:"jdx-newsview-title",children:h}),d.jsxs("div",{className:"jdx-newsview-meta",children:[d.jsxs("span",{className:"jdx-newsview-author",children:["Por ",S]}),l&&d.jsxs("time",{className:"jdx-newsview-date",children:[" • ",we(l)]}),E&&d.jsx("span",{className:`jdx-newsview-badge status-${String(E).toLowerCase()}`,children:E})]})]}),f&&d.jsx("div",{className:"jdx-newsview-media mb-4",children:d.jsx("img",{src:f,alt:h,className:"jdx-newsview-img"})}),d.jsx("section",{className:"jdx-newsview-content prose max-w-none",children:d.jsx("div",{dangerouslySetInnerHTML:{__html:c}})}),d.jsxs("footer",{className:"jdx-newsview-footer mt-6 text-sm text-muted",children:[d.jsxs("div",{children:["Publicado por: ",d.jsx("strong",{children:S})]}),l&&d.jsxs("div",{children:["Publicado: ",we(l,!0)]})]})]})}export{et as default};
