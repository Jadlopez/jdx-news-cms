import{m as f,r as m,j as t}from"./index-D7F0MAQ-.js";import{f as w,h as y}from"./newsService-DiONljKG.js";function k({news:l=[],onEdit:p,onReload:r,pageSize:c=6}){const{userData:a}=f(),[o,g]=m.useState(""),[i,d]=m.useState(1),u=m.useMemo(()=>{const e=o.trim().toLowerCase();return e?l.filter(s=>(s.title||"").toLowerCase().includes(e)||(s.subtitle||"").toLowerCase().includes(e)||(s.content||"").toLowerCase().includes(e)||(s.author||"").toLowerCase().includes(e)||(s.category||"").toLowerCase().includes(e)):l},[l,o]),n=Math.max(1,Math.ceil(u.length/c)),h=u.slice((i-1)*c,i*c);async function j(e,s){confirm("Eliminar noticia?")&&(await w(e,s),r&&r())}async function x(e,s){await y(e,s),r&&r()}const N=(a==null?void 0:a.role)==="editor",b=(a==null?void 0:a.role)==="reportero";return t.jsxs("div",{children:[t.jsx("div",{className:"flex items-center gap-2 mb-4",children:t.jsx("input",{value:o,onChange:e=>{g(e.target.value),d(1)},placeholder:"Buscar por título, autor o categoría...",className:"flex-1 p-2 border rounded"})}),h.length===0?t.jsx("p",{className:"text-sm text-slate-500",children:"No hay resultados."}):t.jsx("ul",{className:"grid md:grid-cols-2 gap-4",children:h.map(e=>t.jsxs("li",{className:"bg-white rounded shadow p-3",children:[t.jsxs("div",{className:"flex gap-4",children:[e.imageUrl&&t.jsx("img",{src:e.imageUrl,alt:e.title,className:"w-28 h-20 object-cover rounded"}),t.jsxs("div",{className:"flex-1",children:[t.jsx("h3",{className:"font-semibold",children:e.title}),t.jsx("p",{className:"text-sm text-slate-600",children:e.subtitle}),t.jsxs("div",{className:"text-xs text-slate-500 mt-1",children:[e.category," • ",e.author," •"," ",t.jsx("span",{className:"italic",children:e.status})]})]})]}),t.jsxs("div",{className:"mt-3 flex gap-2",children:[t.jsx("button",{onClick:()=>p(e),className:"px-3 py-1 border rounded text-sm",children:"Editar"}),t.jsx("button",{onClick:()=>j(e.id,e.imagePath),className:"px-3 py-1 rounded text-sm bg-red-500 text-white",children:"Eliminar"}),N&&t.jsxs(t.Fragment,{children:[t.jsx("button",{onClick:()=>x(e.id,"Publicado"),className:"px-3 py-1 rounded text-sm bg-green-600 text-white",children:"Publicar"}),t.jsx("button",{onClick:()=>x(e.id,"Desactivado"),className:"px-3 py-1 rounded text-sm bg-yellow-500 text-white",children:"Desactivar"})]}),b&&e.status!=="Publicado"&&t.jsx("button",{onClick:()=>x(e.id,"Terminado"),className:"px-3 py-1 rounded text-sm bg-sky-500 text-white",children:"Marcar Terminado"})]})]},e.id))}),t.jsxs("div",{className:"flex items-center justify-between mt-4",children:[t.jsxs("div",{className:"text-sm text-slate-600",children:["Página ",i," de ",n]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{onClick:()=>d(e=>Math.max(1,e-1)),disabled:i===1,className:"px-3 py-1 border rounded",children:"Anterior"}),t.jsx("button",{onClick:()=>d(e=>Math.min(n,e+1)),disabled:i===n,className:"px-3 py-1 border rounded",children:"Siguiente"})]})]})]})}export{k as N};
